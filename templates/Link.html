<html lang="en"> <head> <meta charset="utf-8" /> <title>LINK Chatroom</title> <link rel="stylesheet" href="styles.css"> <meta name="viewport" content="width=device-width, initial-scale=1" /> </head> <body> <header> <div class="brand">LINK</div> <div class="controls"> <label for="room" class="tiny">Room</label> <select id="room"></select> <button id="shareRoom" class="tiny">Share Room</button> <button id="clearRoom" class="tiny">Clear Room</button> <label for="shop" class="tiny">Shop</label> <select id="shop"> <option value="">Select a sticker to buy</option> </select> <label for="buyServer" class="tiny">Buy Server</label> <select id="buyServer"> <option value="">Select server to buy</option> <option value="Regular private server" data-cost="50">Regular private server - 100 coins</option> <option value="Gaming private server" data-cost="100">Gaming private server - 250 coins</option> <option value="trash talk" data-cost="200">trash talk - 500 coins</option> </select> </div> <div class="controls"> <input id="displayName" type="text" placeholder="Display name" /> <button id="saveName">Save</button> <span class="tiny" id="coinsDisplay">Coins: 0</span> </div> </header> <main id="log" aria-live="polite"></main> <footer> <div class="composer"> <input id="input" type="text" placeholder="Type a message and press Enterâ€¦" autocomplete="off" /> <button id="send">Send</button> </div> <div class="sticker-panel" id="stickerPanel"></div> </footer> <script> const STORE_KEY = 'LINK:v10'; const defaultRooms = ['General','Y6 chat','Y7 chat','Y8 chat','Y9 chat','Y10 chat','Y11 chat','Y12 chat','Y13 chat']; const state = { me: {id:'',name:''}, room:'General', messages:{}, coins:0, messageCount:0, boughtStickers:[], customRooms: [], swearsCount:0, kickedUntil: null }; const freeStickers = ['fire.png','goofy.jpeg','ahh.jpeg','bruh.png','bk.jpeg']; const shopStickers = [ {src:'adrian.jpeg', cost:500}, {src:'totr.jpeg', cost:0}, {src:'67.jpeg', cost:90}, {src:'skull.jpeg', cost:80}, {src:'rose.jpg', cost:70}, {src:'funky.jpeg', cost:60}, {src:'yes.jpeg', cost:50}, {src:'that.jpeg', cost:40}, {src:'downloadc 26.jpeg', cost:30}, {src:'download 25.jpeg', cost:20}, {src:'cry.jpeg', cost:10} ]; const badWords = [ "shit","bitch","fuck","nigga","negro","nigger","hell","stupid","damn","dumb", "crap","pussy","dick","cock","penis","vagina","ass","tits","titties","boobs", "fag","faggot","swag of a fag","jesus christ","jesus christ on a motorbike","batshit","dogshit","horseshit","clanker","wireback", "piss","cum","semen","genitals","poo","poop","satan","devil","the devil","bastard","bollocks", ]; const gid = () => Math.random().toString(36).slice(2)+Date.now().toString(36); const nowIso = () => new Date().toISOString(); const el = { log: document.getElementById('log'), input: document.getElementById('input'), send: document.getElementById('send'), room: document.getElementById('room'), displayName: document.getElementById('displayName'), saveName: document.getElementById('saveName'), stickerPanel: document.getElementById('stickerPanel'), shop: document.getElementById('shop'), buyServer: document.getElementById('buyServer'), coinsDisplay: document.getElementById('coinsDisplay'), clearRoom: document.getElementById('clearRoom'), shareRoom: document.getElementById('shareRoom') }; function load(){ try{ const raw = localStorage.getItem(STORE_KEY); if(raw) Object.assign(state, JSON.parse(raw)); }catch{} if(!state.me.id) state.me.id=gid(); if(!state.me.name) state.me.name='Guest-'+state.me.id.slice(0,4); const params = new URLSearchParams(window.location.search); const joinRoomId = params.get('join'); if(joinRoomId){ const room = state.customRooms.find(r => r.id === joinRoomId); if(room) state.room = room.name; } save(); } function save(){ localStorage.setItem(STORE_KEY, JSON.stringify(state)); updateCoinsDisplay(); } function roomMessages(room){ if(!state.messages[room]) state.messages[room]=[]; return state.messages[room]; } function fmtTime(iso){ return new Date(iso).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}); } function escapeHtml(s){ return s.replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); } function filterSwearWords(text){ // Skip filtering if in trash talk room if(state.room.toLowerCase() === "trash talk") return text; let foundSwear = false; let result = text; badWords.forEach(word=>{ const regex = new RegExp('\\b'+word+'\\b','gi'); if(regex.test(result)) foundSwear = true; result = result.replace(regex,'***'); }); if(foundSwear){ state.swearsCount++; if(state.swearsCount >= 3){ state.kickedUntil = Date.now() + 5*60*1000; // 5 minutes alert("You swore too many times! Kicked for 5 minutes."); } } return result; } function renderSystem(text){ const p=document.createElement('div'); p.className='system'; p.textContent=text; el.log.appendChild(p); } function renderMessage(m){ const wrap=document.createElement('div'); wrap.className='msg '+(m.userId===state.me.id?'me':''); wrap.dataset.id=m.id; const meta=document.createElement('div'); meta.className='meta'; const name=document.createElement('span'); name.className='name'; name.textContent=m.name; const time=document.createElement('span'); time.textContent=fmtTime(m.at); meta.append(name,time); const body=document.createElement('div'); body.className='body'; if(m.type==='sticker'){ const img=document.createElement('img'); img.src=m.text; img.classList.add('sticker'); body.appendChild(img); }else body.innerHTML=escapeHtml(m.text); wrap.append(meta,body); el.log.appendChild(wrap); } function draw(){ el.log.innerHTML=''; const msgs=roomMessages(state.room); if(msgs.length===0) renderSystem(No messages in #${state.room} yet. Start the conversation!); else msgs.forEach(m=>renderMessage(m)); el.log.scrollTop=el.log.scrollHeight; renderStickers(); populateShop(); populateRooms(); } function populateRooms(){ el.room.innerHTML=''; const allRooms = [...defaultRooms, ...state.customRooms.map(r=>r.name)]; allRooms.forEach(r=>{ const option = document.createElement('option'); option.value = r; option.textContent = r; el.room.appendChild(option); }); el.room.value = state.room; } function send(text,type='text'){ if(state.kickedUntil && Date.now() < state.kickedUntil){ alert("You are kicked! Wait until your ban expires."); return; } const trimmed=text.replace(/\s+$/,''); if(!trimmed) return; const filtered = filterSwearWords(trimmed); const msg={id:gid(),userId:state.me.id,name:state.me.name,text:filtered,type:type,at:nowIso()}; roomMessages(state.room).push(msg); if(type==='text'){ state.messageCount++; if(state.messageCount % 5 === 0) state.coins++; } save(); renderMessage(msg); el.log.scrollTop=el.log.scrollHeight; } function updateCoinsDisplay(){ el.coinsDisplay.textContent = 'Coins: '+state.coins; } function renderStickers(){ el.stickerPanel.innerHTML=''; const allStickers = [...freeStickers, ...state.boughtStickers]; allStickers.forEach(src=>{ const img=document.createElement('img'); img.src=src; img.classList.add('sticker'); img.addEventListener('click',()=>send(src,'sticker')); el.stickerPanel.appendChild(img); }); } function populateShop(){ el.shop.innerHTML='<option value="">Select a sticker to buy</option>'; shopStickers.forEach(s=>{ if(!state.boughtStickers.includes(s.src)){ const option = document.createElement('option'); option.value = s.src; option.dataset.cost = s.cost; option.textContent = ${s.src} - ${s.cost} coins; el.shop.appendChild(option); } }); } // --- Event Listeners --- el.send.addEventListener('click',()=>{ send(el.input.value); el.input.value=''; el.input.focus(); }); el.input.addEventListener('keydown',(e)=>{ if(e.key==='Enter'&&!e.shiftKey){ e.preventDefault(); el.send.click(); } }); el.room.addEventListener('change',()=>{ state.room=el.room.value; save(); draw(); }); el.saveName.addEventListener('click',()=>{ const v=el.displayName.value.trim(); if(!v) return; state.me.name=v.slice(0,40); save(); renderSystem(You are now known as ${state.me.name}.); }); el.shop.addEventListener('change',()=>{ const sel = el.shop.selectedOptions[0]; const src = sel.value; if(!src) return; const cost = parseInt(sel.dataset.cost); if(state.coins>=cost){ state.coins -= cost; state.boughtStickers.push(src); save(); draw(); alert('Sticker purchased!'); } else alert('Not enough coins!'); el.shop.value=''; }); el.buyServer.addEventListener('change',()=>{ const sel = el.buyServer.selectedOptions[0]; const serverName = sel.value; if(!serverName) return; const cost = parseInt(sel.dataset.cost); if(state.coins >= cost){ state.coins -= cost; const serverId = gid(); state.customRooms.push({id: serverId, name: serverName}); save(); draw(); alert(${serverName} purchased! Shareable link available.); } else alert('Not enough coins!'); el.buyServer.value = ''; }); el.shareRoom.addEventListener('click',()=>{ const room = state.customRooms.find(r => r.name === state.room); if(!room){ alert('Only private rooms can be shared.'); return; } const link = ${window.location.origin}${window.location.pathname}?join=${room.id}; navigator.clipboard.writeText(link).then(()=>{ alert(Link copied! Share it: ${link}); }); }); el.clearRoom.addEventListener('click',()=>{ if(confirm(Clear all messages in #${state.room}?)){ state.messages[state.room]=[]; save(); draw(); } }); // --- Init --- load(); draw(); </script> </body> </html>
